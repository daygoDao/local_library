<%- include('layout.ejs') %>
<main>
    <h1><%= `${title} ${author.name}` %></h1>
    <p><%= author.lifespan %></p>

    <% if(author_books !== undefined) { %>
        <p><strong>Delete the following books before attempting to delete this author.</strong></p>
        <div style="margin-left: 20px; margin-top: 20px">
            <h4>Books</h4>
            <dl>
                <% for(let book of author_books) { %>
                    <dt>
                        <a href=<%= book.url %>> <%= book.title %></a>
                    </dt>
                    <dd><%= book.summary %></dd>
                <% } %>
            </dl>
        </div>
    <% } else { %>
        <p>Do you really want to delete this Author?</p>
        <form action="" method="POST">
            <div class="form-group">
                <input 
                    type="hidden" 
                    name="authorid" 
                    id="authorid"
                    required="true"
                    value=<%= author._id %>>
            </div>

            <button class="btn btn-primary" type="submit">DELETE</button>
        </form>
    <% } %>
</main>