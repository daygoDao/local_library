<%- include('layout.ejs') %>
<main>
    <h1><%= title %></h1>
    
    <form action="" method="POST">
        <div class="form-group">
            <label for="book">Book:</label>
            <select 
                name="book" 
                id="book"
                placeholder="Select book">

                <% let sortedBookList = book_list.sort((a,b) => { let textA = a.title.toUpperCase(); let textB = b.title.toUpperCase(); return (textA < textB) ? -1 : (textA > textB) ? 1 : 0 }) %>

                <% for(book of sortedBookList) { %>
                    <option 
                        value=<%= book._id %>
                        selected=<%= selected_book == book._id.toString() ? 'selected' : false %>>
                        <%= book.title %>
                    </option>
                <% } %>
            </select>
        </div>
        <div class="form-group">
            <label for="due_back">Date when book is available</label>
            <input 
                type="text" 
                name="imprint" 
                id="imprint"
                class="form-control"
                placeholder="Publisher and date information"
                required="true"
                value=<%= (undefined == bookinstance ? '' : bookinstance.due_back) %>>
        </div>
    </form>
</main>